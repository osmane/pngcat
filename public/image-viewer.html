<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Image Viewer</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #000; /* Background color matches the modal window */
  }

  img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    background-color: #000; /* Background color for potential space around the image */
  }
</style>
</head>
<body>
  <!-- Image path will be dynamically updated with JavaScript -->
  <img id="imageToShow" src="" alt="Displayed Image">
  <script>
    // Get the image path from the URL and assign it to img src
    const queryParams = new URLSearchParams(window.location.search);
    const imagePath = queryParams.get('imagePath');
    document.getElementById('imageToShow').src = imagePath;

    window.onload = function() {
      const img = document.getElementById('imageToShow');
      img.onload = function() {
        // Calculate dimensions when the image is loaded
        const ratio = img.naturalWidth / img.naturalHeight;
        const windowRatio = window.innerWidth / window.innerHeight;
        let width, height;

        if (windowRatio > ratio) {
          height = window.innerHeight;
          width = height * ratio;
        } else {
          width = window.innerWidth;
          height = width / ratio;
        }

        // Create message to send to the parent
        const message = { width: width, height: height };
        window.parent.postMessage(message, "*");
      };
      // Check for immediate loading
      if (img.complete) {
        img.onload();
      }
    };
  </script>
</body>
</html>
